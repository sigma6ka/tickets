{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{fetchDataFromAPI,fetchInitialDataFromAPI}from\"./services/Api\";import Card from\"./components/Card\";import Modal from\"./components/Modal\";import Pagination from\"./components/Pagination\";import Loader from\"./components/Loader\";import\"./main.css\";import\"./reset.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[data,setData]=useState([]);const[nextPageUrl,setNextPageUrl]=useState(null);const[prevPageUrl,setPrevPageUrl]=useState(null);const[loading,setLoading]=useState(true);const[totalResults,setTotalResults]=useState(0);const[currentPage,setCurrentPage]=useState(1);const[modalData,setModalData]=useState(null);const[isModalOpen,setIsModalOpen]=useState(false);const[modalEventType,setModalEventType]=useState(\"\");useEffect(()=>{const fetchData=async()=>{try{setLoading(true);const initialData=await fetchInitialDataFromAPI();setData(initialData.results);setTotalResults(initialData.count);setNextPageUrl(initialData.next);setPrevPageUrl(initialData.previous);setLoading(false);}catch(error){console.error(\"Error loading data:\",error);setLoading(false);}};fetchData();},[]);const handlePageChange=async url=>{try{setLoading(true);const newData=await fetchDataFromAPI(url);setData(newData.results);setTotalResults(newData.count);setNextPageUrl(newData.next);setPrevPageUrl(newData.previous);setCurrentPage(getPageNumberFromUrl(url));setLoading(false);}catch(error){console.error(\"Error loading data:\",error);setLoading(false);}};const openModal=(eventData,eventType)=>{setModalData(eventData);setIsModalOpen(true);setModalEventType(eventType);document.body.classList.add('lock');};const closeModal=()=>{setIsModalOpen(false);document.body.classList.remove(\"lock\");};const getPageNumberFromUrl=url=>{const match=url.match(/page=(\\d+)/);return match?parseInt(match[1]):1;};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:loading?/*#__PURE__*/_jsx(Loader,{}):data.map((item,index)=>/*#__PURE__*/_jsx(Card,{data:item,openModal:openModal},index))}),!loading&&/*#__PURE__*/_jsx(Pagination,{nextPageUrl:nextPageUrl,prevPageUrl:prevPageUrl,totalResults:totalResults,onDataLoad:handlePageChange}),isModalOpen&&/*#__PURE__*/_jsx(Modal,{eventType:modalEventType,eventData:modalData,closeModal:closeModal})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","fetchDataFromAPI","fetchInitialDataFromAPI","Card","Modal","Pagination","Loader","jsx","_jsx","jsxs","_jsxs","App","data","setData","nextPageUrl","setNextPageUrl","prevPageUrl","setPrevPageUrl","loading","setLoading","totalResults","setTotalResults","currentPage","setCurrentPage","modalData","setModalData","isModalOpen","setIsModalOpen","modalEventType","setModalEventType","fetchData","initialData","results","count","next","previous","error","console","handlePageChange","url","newData","getPageNumberFromUrl","openModal","eventData","eventType","document","body","classList","add","closeModal","remove","match","parseInt","className","children","map","item","index","onDataLoad"],"sources":["D:/Repository/tickets/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { fetchDataFromAPI, fetchInitialDataFromAPI } from \"./services/Api\";\r\nimport Card from \"./components/Card\";\r\nimport Modal from \"./components/Modal\";\r\nimport Pagination from \"./components/Pagination\";\r\nimport Loader from \"./components/Loader\";\r\nimport \"./main.css\";\r\nimport \"./reset.css\";\r\n\r\nconst App = () => {\r\n  const [data, setData] = useState([]);\r\n  const [nextPageUrl, setNextPageUrl] = useState(null);\r\n  const [prevPageUrl, setPrevPageUrl] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [totalResults, setTotalResults] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [modalData, setModalData] = useState(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\tconst [modalEventType, setModalEventType] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const initialData = await fetchInitialDataFromAPI();\r\n        setData(initialData.results);\r\n        setTotalResults(initialData.count);\r\n        setNextPageUrl(initialData.next);\r\n        setPrevPageUrl(initialData.previous);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error loading data:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handlePageChange = async (url) => {\r\n    try {\r\n      setLoading(true);\r\n      const newData = await fetchDataFromAPI(url);\r\n      setData(newData.results);\r\n      setTotalResults(newData.count);\r\n      setNextPageUrl(newData.next);\r\n      setPrevPageUrl(newData.previous);\r\n      setCurrentPage(getPageNumberFromUrl(url));\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error(\"Error loading data:\", error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const openModal = (eventData, eventType) => {\r\n    setModalData(eventData);\r\n    setIsModalOpen(true);\r\n\t\tsetModalEventType(eventType);\r\n\t\tdocument.body.classList.add('lock');\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n    document.body.classList.remove(\"lock\");\r\n  };\r\n\r\n  const getPageNumberFromUrl = (url) => {\r\n    const match = url.match(/page=(\\d+)/);\r\n    return match ? parseInt(match[1]) : 1;\r\n  };\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <div className=\"card-container\">\r\n        {loading ? (\r\n          <Loader />\r\n        ) : (\r\n          data.map((item, index) => (\r\n            <Card key={index} data={item} openModal={openModal} />\r\n          ))\r\n        )}\r\n      </div>\r\n      {!loading && (\r\n        <Pagination\r\n          nextPageUrl={nextPageUrl}\r\n          prevPageUrl={prevPageUrl}\r\n          totalResults={totalResults}\r\n          onDataLoad={handlePageChange}\r\n        />\r\n      )}\r\n      {isModalOpen && <Modal eventType={modalEventType} eventData={modalData} closeModal={closeModal} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}